{% extends "layout.html" %}

{% set menuid = 'nodes' %}

{% block head %}
    <link rel="stylesheet" href="/static/css/node.css" type="text/css" media="screen" />
    {{ form.media.render() }}
    <script type="text/javascript">
        var make_option = function(value, name) {
            return '<option value="'+value+'">'+name+'</option>';
        }
        $(function() {
            $("#control_id").change(function() {
                var olt_id = $(this).val()
                if(olt_id=="") return;
                $.get("/ajax_entrances_for_olt", {olt_id: olt_id},function(data) {
                    var data = eval("("+data+")");
                    var options = [make_option('','请选择接入点')];
                    for(var i=0; i< data.length; i++) {
                        options.push(make_option(data[i].value,data[i].name))
                    }
                    $("#area_id").html(options.join(""));
                })
            })
        })
    </script>
{% endblock %}

{% block content %}

<div class="row-fluid content">
    <div class="span2">
        {% set submenuid = 'onus' %}
        {% include 'nodes/_sidebar.html' %}
    </div>

    <div class="span10">
        {% from "_form_h.html" import render_field %}
        <form class="form-horizontal" method="POST" action="{{url_for('nodes.onus_edit', id=node.id)}}">
            <h5><i class="icon-pencil"></i> 修改ONU</h5>
            <hr/>
            {% from "_form_h.html" import render_field %}
            {{ form.hidden_tag() }}
            {{ render_field(form.controller_id, class="input-large") }}
            {{ render_field(form.area_id, class="input-large") }}
            {{ render_field(form.name) }}
            {{ render_field(form.alias) }}
            {{ render_field(form.addr) }}
            {{ render_field(form.vendor_id, class="input-large") }}
            {{ render_field(form.model_id, class="input-large") }}
            <legend>SNMP信息</legend>
            {{ render_field(form.snmp_comm) }}
            {{ render_field(form.snmp_wcomm) }}
            {{ render_field(form.snmp_ver) }}
            <legend>其他</legend>
            {{ render_field(form.location) }}
            {{ render_field(form.remark) }}

            <div class="form-actions span10">
                <button type="submit" class="btn btn-primary btn-small">确定</button>
                <button type="submit" class="btn btn-small">取消</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}

