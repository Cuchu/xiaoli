
# Create Date: <2012-08-30 四>

* 导入 tables 
* 定义 Table
#+BEGIN_SRC python
class UserTable(tables.Table):
    check      = tables.CheckBoxColumn()
    edit_btn   = tables.EditBtnColumn(endpoint='user_edit')
    delete_btn = tables.DeleteBtnColumn(endpoint='user_delete')

    login          = tables.Column(verbose_name=u'用户名', orderable=True)
    name           = tables.Column(verbose_name=u'真实姓名')
    role_name      = tables.Column(verbose_name=u'角色名称', accessor='role.name')
    domain         = tables.Column(verbose_name=u'管理域', accessor='domain.name')
    email          = tables.EmailColumn(verbose_name=u'邮箱')
    department     = tables.Column(verbose_name=u'部门')
    telephone      = tables.Column(verbose_name=u'电话')
    # mobile         = tables.Column()
    # memo           = tables.Column()
    # status         = tables.Column()
    # created_at     = tables.DateTimeColumn(verbose_name=u'注册时间',format='%Y-%m-%d %H:%M')
    # remember_token = tables.Column()

    class Meta():
        model = User
        per_page = 3
        order_by = '-login'
#+END_SRC

* 给 Table 添加配置选项
#+BEGIN_SRC python
class Meta():
    model = User
    per_page = 3
    order_by = '-login'
#+END_SRC

* 定义 Column
** 内建 columns
  + Column
  + CheckBoxColumn
  + BaseLinkColumn
  + LinkColumn
  + EmailColumn
  + ButtonColumn
  + EditBtnColumn
  + DeleteBtnColumn
  + DateTimeColumn

* 排序
* 分页
* 自定义样式
* 使用 table
** 在视图中使用 Table
#+BEGIN_SRC python
...
query = User.query
table = UserTable(query, request=request)
return render_template('test_table.html',table=table)
#+END_SRC
** 在模板中使用 table
#+BEGIN_SRC python
{% from "_table_h.html" import render_table, render_screen_meta %}
...
{{ render_screen_meta(table) }}
...
{{ render_table(table) }}
...
#+END_SRC
    
